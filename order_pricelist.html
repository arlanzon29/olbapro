<polymer-element name="olbapro-pricelist" attributes="pricelist">
<template>
	<style>
		#cmdSave
	    {
	        position: absolute;
	        right: 20px;
	        top: 10px;
	         background: #5677fc;
	    }
	    #cmdDelete
	    {
	        position: absolute;
	        right: 20px;
	        top: 60px;
	         background: #5677fc;
	    }
	</style>
	<paper-input label="Filter" id="Filter" value="{{filtervalue}}" on-change="{{validateFilter}}"></paper-input>
	<br>
<olbapro-grid id="grid" rows="10" data="{{filterData}}" insertallowed selectionmode="multiple">
    <olbapro-columns>
      <olbapro-column id="code" label="Code"  width="60"  on-validate="{{validateCode}}"></olbapro-column>
      <olbapro-column id="name" label="Name" width="250"  updateallowed></olbapro-column>
    </olbapro-columns>
  </olbapro-grid> 
<paper-fab icon="save" class="mini" id="cmdSave"  on-click="{{save}}" ></paper-fab>
<paper-fab icon="delete" class="mini" id="cmdDelete" on-click="{{delete}}" ></paper-fab>
</template>
<script>
 Polymer('olbapro-pricelist', {
  	filterData:[],
    ready: function () {         
   		
       
    },
    pricelistChanged:function(){
		this.filterData=this.pricelist;

		for (var i=0;i<this.filterData.length;i++){
			this.filterData[i].position=i;
		}
    },
    save:function(){
      this.$.grid.updateData();
    	/*var deleteRows=this.$.grid.getDeleteRows(); 
    	for (var i=deleteRows.length-1;i>=0;i--){
    		this.pricelist.splice(this.filterData[deleteRows[i]].position, 1);
    	}*/
    	this.fire("save");
    	this.filterData=this.pricelist;
    },
    delete:function(){
    	this.$.grid.deleteSelectedRows();    	
    },  
    validateFilter:function(){
      this.filterData=this.pricelist.filter(function(element,index,arr,value){
          if (element.code.indexOf(this)!=-1 || element.name.indexOf(this)!=-1){
            return true;
          }else{
            return false;
          }
      },this.filtervalue);
    },
    validateCode:function(event,obj){
      this.$.name.setValue(obj.currentRow.position,"Prueba");
    }

   
 });
 </script>
</polymer-element>