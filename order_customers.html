<polymer-element name="olbapro-customers" attributes="customer pricelist customers selectedCustomer" extends="olbapro-form">
<template>
    <style>
    
      .box {
      background: #eee;
    }
  
  </style>
  <section style="background: steelblue;" on-blur="{{test}}">
      <paper-button label="Master Data" on-click="{{collapse}}" id="Master"></paper-button>
      <core-collapse id="colMaster"  class="box" opened  >
        <div vertical layout>
        	<paper-input label="Customer code" id="cardcode" value="{{currentRecord.cardcode}}" floatinglabel  olbapro key updateallowed="true" on-validate="{{cardcodeValidate}}" mandatory></paper-input>
          <paper-input label="Customer name" id="cardname" value="{{currentRecord.cardname}}" floatinglabel  olbapro mandatory></paper-input>
          <span>Price List</span>
          <paper-radio-group selected="{{currentRecord.pricelist}}" >
      	   <template repeat="{{ value, j in pricelist }}">
      	    <paper-radio-button label="{{value.name}}" value="{{value.code}}" name="{{value.code}}" olbapro></paper-radio-button><br>
      	   </template>      
          </paper-radio-group>
        </div>
      </core-collapse>
    </section>
    <br>
    <section style="background: steelblue;">
      <paper-button label="Address" on-click="{{collapse}}" id="Address" ></paper-button>
      <core-collapse id="colAddress"  class="box" opened  >
        <paper-input label="Address" multiline maxRows="5" value="{{currentRecord.address}}"  floatinglabel olbapro ><paper-input>
      </core-collapse>
    </section>

    <olbapro-customerdialog id="customerlistdialog" customers="{{customers}}" selectedCustomer="{{selectedCustomer}}" ></olbapro-customerdialog>
   <shadow></shadow>

    
  </div>
</template>
<script>
 Polymer('olbapro-customers', {    
    collapse:function(event){
      this.$["col"+event.currentTarget.id].toggle();
    },
    cardcodeValidate:function(event){
      for (var i=0;i<this.customers.length;i++){
        if (this.currentRecord.cardcode==this.customers[i].cardcode){
          this.$.cardcode.error="Ya existe un cliente con este codigo";
          this.$.cardcode.invalid=true;
          return false;
        }
      }
      this.$.cardcode.invalid=false;
    },
    listClick:function(){
      this.$.customerlistdialog.show();
    }

 });
 </script>
</polymer-element>