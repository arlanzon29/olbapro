<polymer-element name="olbapro-customers" attributes="customer pricelist customers" extends="olbapro-form">
<template>
    <style>
    
      .box {
      background: #eee;
    }
    #errorIcon {
  background-image: url(error-100.png);
  background-size: 24px 24px;
  height: 24px;
  width: 24px;
}
#errorContainer {
  visibility: true;
  display: -webkit-flex;
  display: flex;
  -webkit-align-items: center;
  align-items: center;
}
  </style>
  <section style="background: steelblue;" on-blur="{{test}}">
      <paper-button label="Master Data" on-click="{{collapse}}" id="Master"></paper-button>
      <core-collapse id="colMaster"  class="box" opened  >
        <div vertical layout>
        	<paper-input label="Customer code" id="cardcode" value="{{currentRecord.cardcode}}" floatinglabel  olbapro key updateallowed="false" on-validate="{{cardcodeValidate}}" mandatory></paper-input>
          <paper-input label="Customer name" id="cardname" value="{{currentRecord.cardname}}" floatinglabel  olbapro mandatory></paper-input>
          <span>Price List</span>
          <paper-radio-group selected="{{currentRecord.pricelist}}" >
      	   <template repeat="{{ value, j in pricelist }}">
      	    <paper-radio-button label="{{value.name}}" value="{{value.code}}" name="{{value.code}}" olbapro></paper-radio-button><br>
      	   </template>      
          </paper-radio-group>
        </div>
      </core-collapse>
    </section>
    <br>
    <section style="background: steelblue;">
      <paper-button label="Address" on-click="{{collapse}}" id="Address" ></paper-button>
      <core-collapse id="colAddress"  class="box" opened  >
        <paper-input label="Address" multiline maxRows="5" value="{{currentRecord.address}}"  floatinglabel olbapro ><paper-input>
      </core-collapse>
    </section>
     <div id="errorContainer">
      <div id="error" role="alert" aria-hidden="{{false}}" style="color:#d34336">Mi error</div>
      <div id="errorIcon"></div>
    </div>
   <shadow></shadow>

    
  </div>
</template>
<script>
 Polymer('olbapro-customers', {    
    collapse:function(event){
      this.$["col"+event.currentTarget.id].toggle();
    },
    cardcodeValidate:function(event){
      for (var i=0;i<this.customers.length;i++){
        if (this.currentRecord.cardcode==this.customers[i].cardcode){
          this.$.cardcode.error="Ya existe un cliente con este codigo";
          this.$.cardcode.invalid=true;
          return false;
        }
      }
      this.$.cardcode.invalid=false;
    }

 });
 </script>
</polymer-element>